{"remainingRequest":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\porject\\vue02\\testcli3.01\\mall\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&scoped=true&lang=css&","dependencies":[{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\src\\views\\home\\Home.vue","mtime":1616393462824},{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\porject\\vue02\\testcli3.01\\mall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#home {\n  height: 100vh;\n  position: relative;\n}\n.home-nav {\n  background-color: var(--color-tint);\n  color: #fff;\n  /* 在使用浏览器原生滚动时为了让导航不跟随一起滚动 */\n  /*position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  z-index: 9; */\n}\n.content {\n  overflow: hidden;\n  position: absolute;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n}\n.tab-control {\n  position: relative;\n  z-index: 9;\n}\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template lang=\"\">\r\n  <div id=\"home\">\r\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\r\n    <!-- <home-swiper :bannerList=\"bannerList\" />\r\n    <home-recommend :recommend=\"recommend\" />\r\n    <home-feature />\r\n    <tabs :titles=\"['流行','时尚','精选']\" /> -->\r\n    <scroll class=\"content\" \r\n            ref=\"scroll\" \r\n            :probe-type=\"3\" \r\n            :pull-up-load=\"true\"\r\n            @scroll=\"contentScroll\"\r\n            @pullingUp=\"loadMore\" >\r\n      <home-swiper :bannerList=\"bannerList\" />\r\n      <home-recommend :recommend=\"recommend\" />\r\n      <home-feature />\r\n      <tabs class=\"tab-control\" \r\n            :titles=\"['流行','时尚','精选']\" \r\n            @tabsClick.native=\"tabsClick(index)\" \r\n            ref=\"tabControl\" />\r\n      <goods-list :goods=\"showGoods\" />\r\n    </scroll>\r\n    <!-- 组件点击事件需要添加事件修饰符 -->\r\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport NavBar from 'components/common/navBar/NavBar'\r\nimport Tabs from 'components/centent/tabs/Tabs'\r\nimport GoodsList from 'components/centent/goods/GoodsList'\r\nimport Scroll from 'components/common/scroll/Scroll'\r\nimport BackTop from 'components/centent/backtop/BackTop'\r\n\r\nimport HomeSwiper from './childComp/HomeSwiper'\r\nimport HomeRecommend from './childComp/HomeRecommend'\r\nimport HomeFeature from './childComp/HomeFeature'\r\n\r\nimport {homeBannerData, homeGoodsData} from 'network/home'\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    NavBar,\r\n    Tabs,\r\n    GoodsList,\r\n    Scroll,\r\n    BackTop,\r\n    HomeSwiper,\r\n    HomeFeature,\r\n    HomeRecommend,\r\n    homeGoodsData\r\n  },\r\n  data() {\r\n    return {\r\n      bannerList: [],\r\n      recommend: [],\r\n      goods: {\r\n        'pop':{page: 0, list: []},\r\n        'new':{page: 0, list: []},\r\n        'sell':{page: 0, list: []}\r\n      },\r\n      currentType: 'pop',\r\n      isShowBackTop: false,\r\n    }\r\n  },\r\n  computed: {\r\n    showGoods() {\r\n      return this.goods[this.currentType].list\r\n    }\r\n  },\r\n  created() {\r\n    this.getHomeBannerData();\r\n    this.getHomeGoodsData('pop')\r\n    this.getHomeGoodsData('new')\r\n    this.getHomeGoodsData('sell')\r\n  },\r\n  methods: {\r\n    getHomeBannerData() {\r\n      homeBannerData().then(res => {\r\n        this.bannerList = res.data.banner.list;\r\n        this.recommend = res.data.recommend.list\r\n      })\r\n    },\r\n    getHomeGoodsData(type) {\r\n      const page = this.goods[type].page + 1;\r\n      homeGoodsData(type, page).then(res => {\r\n        // 把取到的数据存在goods中\r\n        this.goods[type].list.push(...res.data.list)\r\n        // 当前页数+1\r\n        this.goods[type].page += 1;\r\n\r\n        // 初始化 pullup\r\n        this.$refs.scroll.finishPullUp()\r\n      })\r\n    },\r\n    /**\r\n     * 事件\r\n     */\r\n    contentScroll(position) {\r\n      // 拿到页面滚动的位置\r\n      this.isShowBackTop = -position.y > 500\r\n    },\r\n    // 返回顶部\r\n    backClick() {\r\n      this.$refs.scroll.scrollTo(0, 0)\r\n    },\r\n    tabsClick(index) {\r\n      console.log(index)\r\n      switch (index) {\r\n        case 0:\r\n          this.currentType = 'pop'\r\n          break;\r\n        case 1:\r\n          this.currentType = 'new'\r\n          break;\r\n        case 2:\r\n          this.currentType = 'sell'\r\n          break;\r\n      }\r\n      this.$refs.tabControl.currentIndex = index;\r\n    },\r\n    // 下来加载更多数据\r\n    loadMore() {\r\n      this.getHomeGoodsData(this.currentType)\r\n      // 等待图片异步加载完成 重新计算可滚动区域\r\n      this.$refs.scroll.scroll.refresh();\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n  #home {\r\n    height: 100vh;\r\n    position: relative;\r\n  }\r\n  .home-nav {\r\n    background-color: var(--color-tint);\r\n    color: #fff;\r\n    /* 在使用浏览器原生滚动时为了让导航不跟随一起滚动 */\r\n    /*position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    z-index: 9; */\r\n  }\r\n  .content {\r\n    overflow: hidden;\r\n    position: absolute;\r\n    top: 44px;\r\n    bottom: 49px;\r\n    left: 0;\r\n    right: 0;\r\n  }\r\n  .tab-control {\r\n    position: relative;\r\n    z-index: 9;\r\n  }\r\n</style>"]}]}